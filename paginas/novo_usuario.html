<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Novo Usuário</title>

    <style>
      .Cabecalho {
        color: white;
        margin-left: 23px;
      }

      .mb-2 {
        margin-bottom: 2rem;
        margin-right: 10rem;
        width: 40%;
      }

      .form-label {
        color: aliceblue;
      }

      .error {
        color: red;
      }
    </style>
  </head>
  <body>
    <header>
      <div><h2 class="Cabecalho">CADASTRO DE NOVO USUÁRIO</h2></div>
    </header>
    <div class="container-fluid">
      <form id="form-cadastro" action="validacao.php">
        <div class="mb-2">
          <label for="usuario" class="form-label">Usuário</label>
          <input type="hidden" name="opcao" value="1" required />
          <input
            type="text"
            class="form-control"
            name="usuario"
            placeholder="Informe nome do usuário"
            maxlength="30"
            required
          />
        </div>
        <div class="mb-2">
          <label for="senha" class="form-label">Senha</label>
          <div class="input-group">
            <input
              type="password"
              class="form-control"
              name="senha"
              id="senha"
              placeholder="Digite uma senha"
              maxlength="45"
              required
            />
            <button type="button" class="btn btn-secondary" onclick="togglePasswordVisibility('senha')">Mostrar</button>
          </div>
        </div>
        <div class="mb-2">
          <label for="confirmar_senha" class="form-label">Confirmar senha</label>
          <div class="input-group">
            <input
              type="password"
              class="form-control"
              name="confirmar_senha"
              id="confirmar_senha"
              placeholder="Digite a senha novamente"
              maxlength="45"
              required
            />
            <button type="button" class="btn btn-secondary" onclick="togglePasswordVisibility('confirmar_senha')">Mostrar</button>
          </div>
          <div id="erro-senha" class="error"></div>
        </div>
        <div class="mb-2">
          <label for="email" class="form-label">E-mail</label>
          <input
            type="email"
            class="form-control"
            name="email"
            placeholder="Digite um e-mail"
            maxlength="100"
            required
          />
        </div>
        <div class="mb-2">
          <label for="select-example" class="form-label">Nível de Acesso</label>
          <select
            class="form-select"
            name="nivel_acesso"
            aria-label="Exemplo de seleção"
            required
          >
            <option disabled selected value>
              Selecione um Nível e Acesso.
            </option>
            <option value="Atendente">Atendente</option>
            <option value="Suporte">Suporte</option>
            <option value="Adminitrador">Administrador</option>
          </select>
        </div>
        <div class="mb-2">
          <button type="submit" class="btn btn-primary" id="btn-salvar-user">
            SALVAR
          </button>
        </div>
      </form>
    </div>

    <script>
      function togglePasswordVisibility(inputId) {
        var input = document.getElementById(inputId);
        if (input.type === "password") {
          input.type = "text";
        } else {
          input.type = "password";
        }
      }

      function verificarSenhas() {
        var senha = document.getElementById("senha").value;
        var confirmarSenha = document.getElementById("confirmar_senha").value;
        var erroSenha = document.getElementById("erro-senha");

        if (senha !== confirmarSenha) {
          erroSenha.textContent = "As senhas não coincidem.";
        } else {
          erroSenha.textContent = "";
        }
      }

      // Adicionar evento de validação ao formulário
      document.getElementById("form-cadastro").addEventListener("submit", function (event) {
        verificarSenhas();

        // Verificar se há erro de senha
        if (document.getElementById("erro-senha").textContent !== "") {
          event.preventDefault(); // Impedir o envio do formulário se as senhas não coincidem
        }
      });
    </script>
  </body>
</html>
